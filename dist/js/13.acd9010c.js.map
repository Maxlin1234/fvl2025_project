{"version":3,"file":"js/13.acd9010c.js","mappings":"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","sources":["webpack://fvl2025/./src/views/PortfolioDetil.vue","webpack://fvl2025/./src/views/PortfolioDetil.vue?4ff8"],"sourcesContent":["<!-- src/views/PortfolioDetil.vue -->\n<template>\n  <div class=\"work-detail\" v-if=\"work\">\n    <!-- 作品圖片區塊 - 三張圖片網格 -->\n    <div v-if=\"imageUrls.length > 1\" class=\"work-hero-grid\">\n      <div v-for=\"(url, idx) in imageUrls\" :key=\"idx\" class=\"work-hero\">\n        <img :src=\"url\" :alt=\"`work-${idx + 1}`\" />\n      </div>\n    </div>\n    \n    <div v-else class=\"work-hero\">\n      <img :src=\"coverUrl\" alt=\"cover\" />\n    </div>\n\n    <!-- 主要內容區塊 -->\n    <div class=\"work-content\">\n      <!-- 作品標題 -->\n      <!-- <div class=\"work-header\">\n        <h1 class=\"work-title\">{{ isEnglish ? work?.work_en?.title : work?.work_zh?.title }}</h1>\n      </div> -->\n\n      <!-- 兩欄佈局：作品介紹 + 藝術家資訊 -->\n      <div class=\"work-main-layout\">\n        <!-- 左欄：作品介紹 -->\n        <div class=\"work-description-section\">\n          <h2 class=\"section-heading\">{{ isEnglish ? work?.work_en?.title : work?.work_zh?.title }}</h2>\n          <div class=\"work-description\">{{ descriptionText }}</div>\n        </div>\n\n        <!-- 右欄：藝術家資訊 -->\n        <div class=\"artist-section\">\n          <!-- <h2 class=\"section-heading\">{{ isEnglish ? 'About Artist' : '藝術家' }}</h2> -->\n          <h2 class=\"section-heading\">{{ isEnglish ? work?.work_en.interactive_description : work?.work_zh.interactive_description }}</h2>\n          <div class=\"artist-content\">\n            <template v-if=\"!hideArtistPhoto\">\n              <div v-if=\"artistAvatarUrls.length <= 1\" class=\"artist-photo\">\n                <img :src=\"artistAvatarUrls[0]\" alt=\"artist photo\" />\n              </div>\n              <div v-else class=\"artist-photos\">\n                <img v-for=\"(url, i) in artistAvatarUrls\" :key=\"i\" :src=\"url\" alt=\"artist photo\" />\n              </div>\n            </template>\n            <div class=\"artist-info\">\n              <p>{{ artistNoteText }}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div v-else class=\"work-detail loading\">{{ errorText || 'Loading...' }}</div>\n</template>\n\n<script>\nimport { useRoute } from 'vue-router';\nimport { ref, onMounted, onBeforeUnmount, computed } from 'vue';\nimport axios from 'axios';\n\nexport default {\n  name: 'PortfolioDetil',\n  setup() {\n    const route = useRoute();\n    const id = String(route.params.id || '');\n\n    const isEnglish = ref(false);\n    const work = ref(null);\n    const coverUrl = ref('');\n    const secondaryUrl = ref(''); // kept for backward compatibility (unused in template now)\n    const imageUrls = ref([]);\n    const descriptionText = ref('');\n    const errorText = ref('');\n    const artists = ref([]);\n    const scheduleWorks = ref([]);\n    const cachedListIndex = ref(null);\n\n    const fetchArtists = async () => {\n      try {\n        const { data } = await axios.get('https://unzip-clab-api.clab.org.tw/api/v1/schedules/10/artists?page=0&limit=25');\n        const list = Array.isArray(data?.results) ? data.results : [];\n        artists.value = list;\n      } catch (e) {\n        console.error('Failed to fetch artists list:', e);\n      }\n    };\n    const resolveInitialLang = () => {\n      const q = route.query.lang;\n      if (q === 'en') return true;\n      if (q === 'zh') return false;\n      try { return localStorage.getItem('lang') === 'en'; } catch { return false; }\n    };\n\n    const pickFirstNonEmpty = (obj, keys) => {\n      for (const key of keys) {\n        const val = obj && typeof obj[key] === 'string' ? obj[key] : '';\n        if (val && val.trim().length > 0) return val;\n      }\n      return '';\n    };\n\n    const stripHtml = (html) => {\n      if (!html || typeof html !== 'string') return '';\n      const withNewlines = html.replace(/<br\\s*\\/?>(\\r\\n)?/gi, '\\n');\n      const temp = document.createElement('div');\n      temp.innerHTML = withNewlines;\n      const text = temp.textContent || temp.innerText || '';\n      return text;\n    };\n\n    const recalcDerived = () => {\n      const makeUrl = (p) => (p ? `https://unzip-clab-api.clab.org.tw/${p}` : '');\n      const p1 = work.value?.photo_1 || '';\n      const p2 = work.value?.photo_2 || '';\n      const p3 = work.value?.photo_3 || '';\n      imageUrls.value = [p1, p2, p3].filter(Boolean).slice(0, 3).map(makeUrl);\n\n      coverUrl.value = imageUrls.value[0] || '';\n      const second = work.value?.photo_2 || work.value?.photo_3 || '';\n      secondaryUrl.value = second ? makeUrl(second) : '';\n\n      const langBlock = isEnglish.value ? work.value?.work_en : work.value?.work_zh;\n      const raw = pickFirstNonEmpty(langBlock || {}, ['description', 'proposal', 'note', 'summary', 'content', 'text']);\n      descriptionText.value = stripHtml(raw);\n    };\n\n    const artistNoteText = computed(() => {\n      const langBlock = isEnglish.value ? work.value?.work_en : work.value?.work_zh;\n      const source = pickFirstNonEmpty(langBlock || {}, ['note', 'artist']);\n      return stripHtml(source);\n    });\n\n    const resolvedWorkIndex = computed(() => {\n      // 0) 列表頁緩存的 idx 優先\n      if (typeof cachedListIndex.value === 'number' && cachedListIndex.value >= 0) {\n        return cachedListIndex.value;\n      }\n      // 1) 優先使用 work.index（資料庫欄位），常見為 1-based；需轉 0-based\n      const raw = work.value?.index;\n      if (raw !== undefined && raw !== null) {\n        const n = Number(raw);\n        if (!Number.isNaN(n)) {\n          const zeroBased = Math.max(0, Math.floor(n) - 1);\n          return zeroBased;\n        }\n      }\n      // 2) 否則，用目前 work.id 在排程作品列表中的位置\n      if (scheduleWorks.value && scheduleWorks.value.length > 0) {\n        const idx = scheduleWorks.value.findIndex(w => String(w.id) === String(id));\n        if (idx >= 0) return idx;\n      }\n      // 3) 最後退回 0\n      return 0;\n    });\n\n    const artistAvatarUrlFromIndex = (idx) => {\n      const artist = artists.value && artists.value[idx] ? artists.value[idx] : null;\n      const path = artist?.avatar || '';\n      return path ? `https://unzip-clab-api.clab.org.tw/${path}` : '';\n    };\n\n    const findArtistIndexByZhName = (zhName) => {\n      if (!Array.isArray(artists.value)) return -1;\n      return artists.value.findIndex(a => a?.artist_zh?.name === zhName);\n    };\n\n    const overrideArtistIndexForWork = computed(() => {\n      const titleZh = work.value?.work_zh?.title || '';\n      const titleEn = work.value?.work_en?.title || '';\n      const titleAllLower = `${titleZh} ${titleEn}`.toLowerCase();\n      // 特例 1：奶油金剛 → 顯示「簡單映相」（僅單張）\n      if (titleZh.includes('奶油金剛')) {\n        const idx = findArtistIndexByZhName('簡單映相');\n        return idx >= 0 ? idx : null;\n      }\n      // 特例 2：《昌勳與他的打字機》或 Dome穴遇言 → 顯示「可揚與他的快樂夥伴」\n      if (titleZh.includes('昌勳與他的打字機') || titleZh.includes('Dome穴遇言')) {\n        const idx = findArtistIndexByZhName('可揚與他的快樂夥伴');\n        return idx >= 0 ? idx : null;\n      }\n      // 特例 3：簡單映相 → 強制使用藝術家清單第 5 筆（0-based: 4）\n      if (titleZh.includes('簡單映相')) {\n        return 4;\n      }\n      // 特例 4：thewhole → 僅顯示「謝杰樺 × 安娜琪舞蹈劇場」\n      if (titleAllLower.includes('thewhole')) {\n        const idx = findArtistIndexByZhName('謝杰樺 × 安娜琪舞蹈劇場');\n        return idx >= 0 ? idx : null;\n      }\n      return null;\n    });\n\n    const dualArtistOverrideIndices = computed(() => {\n      const titleZh = work.value?.work_zh?.title || '';\n      // 規則 A：作品需同頁顯示「王一鷗 × 阿利娜・托凡」\n      if (\n        titleZh.includes('王一鷗') ||\n        titleZh.includes('阿利娜') ||\n        titleZh.includes('阿利娜・托凡') ||\n        titleZh.includes('水深萬象') ||\n        titleZh.includes('水身萬象')\n      ) {\n        const a = findArtistIndexByZhName('王一鷗');\n        const b = findArtistIndexByZhName('阿利娜・托凡');\n        const indices = [a, b].filter(i => typeof i === 'number' && i >= 0);\n        if (indices.length === 2) return indices;\n      }\n      return null;\n    });\n\n    const isDualArtistWork = computed(() => {\n      const titleZh = work.value?.work_zh?.title || '';\n      // 僅在標題明確為「赤聲之曙」時顯示兩位藝術家\n      return titleZh === '赤聲之曙';\n    });\n\n    const artistAvatarUrls = computed(() => {\n      const idx = resolvedWorkIndex.value;\n      if (!Array.isArray(artists.value) || artists.value.length === 0) return [];\n      // 特例（最高優先）：明確指定的雙藝術家組合\n      if (Array.isArray(dualArtistOverrideIndices.value) && dualArtistOverrideIndices.value.length === 2) {\n        return dualArtistOverrideIndices.value.map(i => artistAvatarUrlFromIndex(i)).filter(Boolean);\n      }\n      // 特例（其次）：標題對應到單一指定藝術家（如 奶油金剛 → 簡單映相）\n      if (overrideArtistIndexForWork.value !== null) {\n        const singleOverride = artistAvatarUrlFromIndex(overrideArtistIndexForWork.value);\n        return singleOverride ? [singleOverride] : [];\n      }\n      // 一般雙藝術家規則（僅限赤聲之曙）\n      if (isDualArtistWork.value) {\n        const first = artistAvatarUrlFromIndex(idx);\n        const second = artistAvatarUrlFromIndex(idx + 1);\n        return [first, second].filter(Boolean);\n      }\n      // 預設：依序顯示單一對應藝術家\n      const single = artistAvatarUrlFromIndex(idx) || artistAvatarUrlFromIndex(0);\n      return single ? [single] : [];\n    });\n\n    const hideArtistPhoto = computed(() => {\n      const tZh = work.value?.work_zh?.title || '';\n      const tEn = work.value?.work_en?.title || '';\n      const s = `${tZh} ${tEn}`;\n      return s.includes('沉浸式影音工作坊－實踐大學媒傳系成果呈現') || s.toLowerCase().includes('immersive audio-visual workshop');\n    });\n\n    const loadFromLocal = () => {\n      try {\n        const key = `work_${id}`;\n        const raw = localStorage.getItem(key);\n        if (!raw) return false;\n        const parsed = JSON.parse(raw);\n        work.value = parsed;\n        if (typeof parsed?._listIndex === 'number') {\n          cachedListIndex.value = parsed._listIndex;\n        }\n        recalcDerived();\n        return true;\n      } catch (e) {\n        console.error('Failed to parse work data from localStorage:', e);\n        return false;\n      }\n    };\n\n    const extractEntity = (data) => {\n      if (!data) return null;\n      if (Array.isArray(data?.results)) return data.results[0] || null;\n      if (data?.data && typeof data.data === 'object') return data.data; // some APIs wrap in data\n      if (typeof data === 'object') return data;\n      return null;\n    };\n\n    const fetchFromApi = async () => {\n      try {\n        const { data } = await axios.get(`https://unzip-clab-api.clab.org.tw/api/v1/works/${id}`);\n        const entity = extractEntity(data);\n        if (entity) {\n          work.value = entity;\n          recalcDerived();\n        } else {\n          errorText.value = 'No data for this work.';\n        }\n      } catch (e) {\n        console.error('Failed to fetch work by id:', e);\n        errorText.value = 'Failed to load work. Please try again later.';\n      }\n    };\n\n    const handleStorage = (e) => {\n      if (e.key === 'lang') {\n        isEnglish.value = e.newValue === 'en';\n        if (work.value) recalcDerived();\n      }\n    };\n\n    onMounted(async () => {\n      isEnglish.value = resolveInitialLang();\n      const ok = loadFromLocal();\n      if (!ok) await fetchFromApi();\n      // 取得該排程的作品清單，用於計算當前作品在清單中的序位\n      try {\n        const { data } = await axios.get('https://unzip-clab-api.clab.org.tw/api/v1/schedules/10/works?page=0&limit=25');\n        scheduleWorks.value = Array.isArray(data?.results) ? data.results : [];\n      } catch (e) {\n        console.error('Failed to fetch schedule works list:', e);\n        scheduleWorks.value = [];\n      }\n      await fetchArtists();\n      window.addEventListener('storage', handleStorage);\n    });\n\n    onBeforeUnmount(() => {\n      window.removeEventListener('storage', handleStorage);\n    });\n\n    return { work, coverUrl, secondaryUrl, imageUrls, isEnglish, descriptionText, errorText, artistNoteText, artistAvatarUrls, hideArtistPhoto };\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.work-detail {\n  background: #0e0e0e;\n  color: #f2f2f2;\n  min-height: 100vh;\n}\n\n.work-detail.loading {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n/* 作品圖片區塊 - 三張圖片網格 */\n.work-hero-grid {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 8px;\n  width: 100%;\n  height: 50vh;\n  overflow: hidden;\n}\n\n.work-hero {\n  width: 100%;\n  height: 50vh;\n  background: #000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  overflow: hidden;\n}\n\n.work-hero img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  transition: transform 0.3s ease;\n}\n\n.work-hero:hover img {\n  transform: scale(1.05);\n}\n\n/* 主要內容區塊 */\n.work-content {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 60px 20px 80px;\n}\n\n.work-header {\n  text-align: center;\n  margin-bottom: 60px;\n}\n\n.work-title {\n  font-size: 2.5rem;\n  font-weight: 700;\n  margin: 0;\n  color: #ffffff;\n  line-height: 1.2;\n  letter-spacing: 1px;\n}\n\n/* 兩欄佈局 */\n.work-main-layout {\n  background-color: white;\n  // border-radius: 25px;\n  padding: 25px;\n  display: grid;\n  grid-template-columns: 1.5fr 1fr;\n  gap: 80px;\n  align-items: start;\n}\n\n/* 作品介紹區塊 */\n.work-description-section {\n  .section-heading {\n    font-size: 1.8rem;\n    font-weight: 600;\n    margin: 0 0 30px 0;\n    color: #000000;\n    border-bottom: 3px solid #333;\n    padding-bottom: 15px;\n    letter-spacing: 0.5px;\n  }\n\n  .work-description {\n    font-size: 1.1rem;\n    line-height: 1.9;\n    color: #000000;\n    white-space: pre-wrap;\n    text-align: justify;\n  }\n}\n\n/* 藝術家資訊區塊 */\n.artist-section {\n  .section-heading {\n    font-size: 1.8rem;\n    font-weight: 600;\n    margin: 0 0 30px 0;\n    color: #000000;\n    border-bottom: 3px solid #333;\n    padding-bottom: 15px;\n    letter-spacing: 0.5px;\n  }\n\n  .artist-content {\n    display: flex;\n    flex-direction: column;\n    gap: 30px;\n  }\n\n  .artist-photo {\n    width: 100%;\n    max-width: 220px;\n    margin: 0 auto;\n    \n    img {\n      width: 100%;\n      height: 220px;\n      object-fit: cover;\n      border-radius: 50%;\n      border: 4px solid #ffffff;\n      box-shadow: 0 8px 30px rgba(255, 255, 255, 0.15);\n      transition: transform 0.3s ease;\n    }\n  }\n\n  .artist-photo:hover img {\n    transform: scale(1.05);\n  }\n\n  .artist-photos {\n    width: 100%;\n    max-width: 360px;\n    margin: 0 auto;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 16px;\n\n    img {\n      width: 48%;\n      height: 200px;\n      object-fit: cover;\n      border-radius: 50%;\n      border: 4px solid #ffffff;\n      box-shadow: 0 8px 30px rgba(255, 255, 255, 0.15);\n      transition: transform 0.3s ease;\n    }\n  }\n\n  .artist-info {\n    p {\n      font-size: 1rem;\n      line-height: 1.8;\n      color: #000000;\n      margin: 0;\n      white-space: pre-wrap;\n      text-align: justify;\n    }\n  }\n}\n\n/* 響應式設計 */\n@media (max-width: 1024px) {\n  .work-main-layout {\n    gap: 60px;\n  }\n  \n  .work-hero-grid {\n    grid-template-columns: repeat(2, 1fr);\n    height: 40vh;\n  }\n  \n  .work-hero {\n    height: 40vh;\n  }\n}\n\n@media (max-width: 768px) {\n  .work-content {\n    padding: 40px 16px 60px;\n  }\n\n  .work-title {\n    font-size: 2rem;\n  }\n\n  .work-main-layout {\n    grid-template-columns: 2fr;\n    gap: 50px;\n  }\n\n  .work-hero-grid {\n    grid-template-columns: 1fr;\n    height: auto;\n  }\n\n  .work-hero {\n    height: 35vh;\n  }\n\n  .section-heading {\n    font-size: 1.5rem;\n  }\n\n  .artist-content {\n    flex-direction: row;\n    align-items: flex-start;\n    gap: 25px;\n  }\n\n  .artist-photo {\n    max-width: 150px;\n    flex-shrink: 0;\n    \n    img {\n      height: 150px;\n    }\n  }\n\n  .artist-info {\n    flex: 1;\n  }\n}\n\n@media (max-width: 480px) {\n  .work-content {\n    padding: 30px 12px 50px;\n  }\n\n  .work-title {\n    font-size: 1.8rem;\n  }\n\n  .section-heading {\n    font-size: 1.3rem;\n  }\n\n  .work-description {\n    font-size: 1rem;\n  }\n\n  .artist-content {\n    flex-direction: column;\n    text-align: center;\n    gap: 20px;\n  }\n\n  .artist-photo {\n    max-width: 180px;\n    \n    img {\n      height: 180px;\n    }\n  }\n}\n\n@media (min-width: 2560px) {\n  .work-content {\n    max-width: 1800px;\n    padding: 80px 40px 120px;\n  }\n\n  .work-title {\n    font-size: 3.5rem;\n  }\n\n  .section-heading {\n    font-size: 2.2rem;\n  }\n\n  .work-description {\n    font-size: 1.3rem;\n  }\n\n  .artist-info p {\n    font-size: 1.2rem;\n  }\n\n  .artist-photo img {\n    height: 280px;\n  }\n\n  .work-hero-grid {\n    height: 60vh;\n  }\n\n  .work-hero {\n    height: 60vh;\n  }\n}\n</style>\n","import { render } from \"./PortfolioDetil.vue?vue&type=template&id=6067f326&scoped=true\"\nimport script from \"./PortfolioDetil.vue?vue&type=script&lang=js\"\nexport * from \"./PortfolioDetil.vue?vue&type=script&lang=js\"\n\nimport \"./PortfolioDetil.vue?vue&type=style&index=0&id=6067f326&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6067f326\"]])\n\nexport default __exports__"],"names":["class","$setup","work","_createElementBlock","_hoisted_1","imageUrls","length","_hoisted_2","_Fragment","_renderList","url","idx","key","_createElementVNode","src","alt","_hoisted_4","coverUrl","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_toDisplayString","isEnglish","work_en","title","work_zh","_hoisted_10","descriptionText","_hoisted_11","_hoisted_12","interactive_description","_hoisted_13","hideArtistPhoto","artistAvatarUrls","_hoisted_14","_hoisted_16","i","_hoisted_18","artistNoteText","_hoisted_19","errorText","name","setup","route","useRoute","id","String","params","ref","secondaryUrl","artists","scheduleWorks","cachedListIndex","fetchArtists","async","data","axios","get","list","Array","isArray","results","value","e","console","error","resolveInitialLang","q","query","lang","localStorage","getItem","pickFirstNonEmpty","obj","keys","val","trim","stripHtml","html","withNewlines","replace","temp","document","createElement","innerHTML","text","textContent","innerText","recalcDerived","makeUrl","p","p1","photo_1","p2","photo_2","p3","photo_3","filter","Boolean","slice","map","second","langBlock","raw","computed","source","resolvedWorkIndex","index","undefined","n","Number","isNaN","zeroBased","Math","max","floor","findIndex","w","artistAvatarUrlFromIndex","artist","path","avatar","findArtistIndexByZhName","zhName","a","artist_zh","overrideArtistIndexForWork","titleZh","titleEn","titleAllLower","toLowerCase","includes","dualArtistOverrideIndices","b","indices","isDualArtistWork","singleOverride","first","single","tZh","tEn","s","loadFromLocal","parsed","JSON","parse","_listIndex","extractEntity","fetchFromApi","entity","handleStorage","newValue","onMounted","ok","window","addEventListener","onBeforeUnmount","removeEventListener","__exports__","render"],"sourceRoot":""}