{"ast":null,"code":"import * as THREE from 'three';\nexport default {\n  name: 'Ban-ner',\n  mounted() {\n    const imageElement = this.$refs.image;\n    const container = this.$el;\n    const loader = new THREE.TextureLoader();\n    loader.load(imageElement.src, texture => {\n      initScene(texture);\n    });\n    const vertexShader = `\n      varying vec2 vUv;\n      void main() {\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n      }\n    `;\n    const fragmentShader = `\n      varying vec2 vUv;\n      uniform sampler2D u_texture;\n      uniform vec2 u_mouse;\n      uniform vec2 u_prevMouse;\n      uniform float u_aberrationIntensity;\n\n      void main() {\n        vec2 gridUV = floor(vUv * vec2(20.0)) / vec2(20.0);\n        vec2 centerOfPixel = gridUV + vec2(1.0 / 20.0);\n        vec2 mouseDirection = u_mouse - u_prevMouse;\n        vec2 pixelToMouse = centerOfPixel - u_mouse;\n        float dist = length(pixelToMouse);\n        float strength = smoothstep(0.3, 0.0, dist);\n        vec2 uvOffset = strength * -mouseDirection * 0.2;\n        vec2 uv = vUv - uvOffset;\n\n        vec4 r = texture2D(u_texture, uv + vec2(strength * u_aberrationIntensity * 0.01, 0.0));\n        vec4 g = texture2D(u_texture, uv);\n        vec4 b = texture2D(u_texture, uv - vec2(strength * u_aberrationIntensity * 0.01, 0.0));\n\n        gl_FragColor = vec4(r.r, g.g, b.b, 1.0);\n      }\n    `;\n    let scene, camera, renderer, plane;\n    const mouse = new THREE.Vector2(0.5, 0.5);\n    const prevMouse = new THREE.Vector2(0.5, 0.5);\n    let aberration = 0;\n    function initScene(texture) {\n      // renderer\n      renderer = new THREE.WebGLRenderer({\n        alpha: true\n      });\n      renderer.setSize(window.innerWidth, window.innerHeight);\n      renderer.setPixelRatio(window.devicePixelRatio);\n      renderer.domElement.style.position = 'absolute';\n      renderer.domElement.style.inset = '0';\n      container.appendChild(renderer.domElement);\n\n      // scene & camera\n      scene = new THREE.Scene();\n      camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 10);\n      camera.position.z = 1;\n      const uniforms = {\n        u_texture: {\n          value: texture\n        },\n        u_mouse: {\n          value: mouse.clone()\n        },\n        u_prevMouse: {\n          value: prevMouse.clone()\n        },\n        u_aberrationIntensity: {\n          value: 0.0\n        }\n      };\n      const geometry = new THREE.PlaneGeometry(2, 2);\n      const material = new THREE.ShaderMaterial({\n        uniforms,\n        vertexShader,\n        fragmentShader\n      });\n      plane = new THREE.Mesh(geometry, material);\n      scene.add(plane);\n      animate();\n      window.addEventListener('resize', onResize);\n      container.addEventListener('mousemove', onMouseMove);\n    }\n    function onMouseMove(e) {\n      const rect = container.getBoundingClientRect();\n      prevMouse.copy(mouse);\n      mouse.x = (e.clientX - rect.left) / rect.width;\n      mouse.y = 1 - (e.clientY - rect.top) / rect.height;\n      aberration = 1.0;\n    }\n    function onResize() {\n      renderer.setSize(window.innerWidth, window.innerHeight);\n      camera.aspect = window.innerWidth / window.innerHeight;\n      camera.updateProjectionMatrix();\n    }\n    function animate() {\n      requestAnimationFrame(animate);\n      plane.material.uniforms.u_mouse.value.copy(mouse);\n      plane.material.uniforms.u_prevMouse.value.copy(prevMouse);\n      aberration = Math.max(0.0, aberration - 0.02);\n      plane.material.uniforms.u_aberrationIntensity.value = aberration;\n      renderer.render(scene, camera);\n    }\n  }\n};","map":{"version":3,"names":["THREE","name","mounted","imageElement","$refs","image","container","$el","loader","TextureLoader","load","src","texture","initScene","vertexShader","fragmentShader","scene","camera","renderer","plane","mouse","Vector2","prevMouse","aberration","WebGLRenderer","alpha","setSize","window","innerWidth","innerHeight","setPixelRatio","devicePixelRatio","domElement","style","position","inset","appendChild","Scene","PerspectiveCamera","z","uniforms","u_texture","value","u_mouse","clone","u_prevMouse","u_aberrationIntensity","geometry","PlaneGeometry","material","ShaderMaterial","Mesh","add","animate","addEventListener","onResize","onMouseMove","e","rect","getBoundingClientRect","copy","x","clientX","left","width","y","clientY","top","height","aspect","updateProjectionMatrix","requestAnimationFrame","Math","max","render"],"sources":["/Users/linhankuan/fvl2025/src/components/Banner.vue"],"sourcesContent":["<template>\n  <div id=\"imageContainer\">\n    <img ref=\"image\" id=\"myImage\"/>\n  </div>\n</template>\n\n<script>\nimport * as THREE from 'three';\n\nexport default {\n  name: 'Ban-ner',\n  mounted() {\n    const imageElement = this.$refs.image;\n    const container = this.$el;\n\n    const loader = new THREE.TextureLoader();\n    loader.load(imageElement.src, (texture) => {\n      initScene(texture);\n    });\n\n    const vertexShader = `\n      varying vec2 vUv;\n      void main() {\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n      }\n    `;\n\n    const fragmentShader = `\n      varying vec2 vUv;\n      uniform sampler2D u_texture;\n      uniform vec2 u_mouse;\n      uniform vec2 u_prevMouse;\n      uniform float u_aberrationIntensity;\n\n      void main() {\n        vec2 gridUV = floor(vUv * vec2(20.0)) / vec2(20.0);\n        vec2 centerOfPixel = gridUV + vec2(1.0 / 20.0);\n        vec2 mouseDirection = u_mouse - u_prevMouse;\n        vec2 pixelToMouse = centerOfPixel - u_mouse;\n        float dist = length(pixelToMouse);\n        float strength = smoothstep(0.3, 0.0, dist);\n        vec2 uvOffset = strength * -mouseDirection * 0.2;\n        vec2 uv = vUv - uvOffset;\n\n        vec4 r = texture2D(u_texture, uv + vec2(strength * u_aberrationIntensity * 0.01, 0.0));\n        vec4 g = texture2D(u_texture, uv);\n        vec4 b = texture2D(u_texture, uv - vec2(strength * u_aberrationIntensity * 0.01, 0.0));\n\n        gl_FragColor = vec4(r.r, g.g, b.b, 1.0);\n      }\n    `;\n\n    let scene, camera, renderer, plane;\n    const mouse = new THREE.Vector2(0.5, 0.5);\n    const prevMouse = new THREE.Vector2(0.5, 0.5);\n    let aberration = 0;\n\n    function initScene(texture) {\n      // renderer\n      renderer = new THREE.WebGLRenderer({ alpha: true });\n      renderer.setSize(window.innerWidth, window.innerHeight);\n      renderer.setPixelRatio(window.devicePixelRatio);\n      renderer.domElement.style.position = 'absolute';\n      renderer.domElement.style.inset = '0';\n      container.appendChild(renderer.domElement);\n\n      // scene & camera\n      scene = new THREE.Scene();\n      camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 10);\n      camera.position.z = 1;\n\n      const uniforms = {\n        u_texture: { value: texture },\n        u_mouse: { value: mouse.clone() },\n        u_prevMouse: { value: prevMouse.clone() },\n        u_aberrationIntensity: { value: 0.0 }\n      };\n\n      const geometry = new THREE.PlaneGeometry(2, 2);\n      const material = new THREE.ShaderMaterial({\n        uniforms,\n        vertexShader,\n        fragmentShader\n      });\n\n      plane = new THREE.Mesh(geometry, material);\n      scene.add(plane);\n\n      animate();\n      window.addEventListener('resize', onResize);\n      container.addEventListener('mousemove', onMouseMove);\n    }\n\n    function onMouseMove(e) {\n      const rect = container.getBoundingClientRect();\n      prevMouse.copy(mouse);\n      mouse.x = (e.clientX - rect.left) / rect.width;\n      mouse.y = 1 - (e.clientY - rect.top) / rect.height;\n      aberration = 1.0;\n    }\n\n    function onResize() {\n      renderer.setSize(window.innerWidth, window.innerHeight);\n      camera.aspect = window.innerWidth / window.innerHeight;\n      camera.updateProjectionMatrix();\n    }\n\n    function animate() {\n      requestAnimationFrame(animate);\n\n      plane.material.uniforms.u_mouse.value.copy(mouse);\n      plane.material.uniforms.u_prevMouse.value.copy(prevMouse);\n      aberration = Math.max(0.0, aberration - 0.02);\n      plane.material.uniforms.u_aberrationIntensity.value = aberration;\n\n      renderer.render(scene, camera);\n    }\n  }\n};\n</script>\n\n<style>\n#imageContainer {\n  position: relative;\n  width: 100vw;\n  height: 100vh;\n  overflow: hidden;\n}\n\n#myImage {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  z-index: 1;\n}\n\ncanvas {\n  z-index: 2;\n  pointer-events: none;\n  position: absolute;\n  inset: 0;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}