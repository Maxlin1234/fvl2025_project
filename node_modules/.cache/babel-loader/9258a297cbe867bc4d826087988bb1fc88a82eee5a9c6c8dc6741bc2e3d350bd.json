{"ast":null,"code":"import { gsap } from 'gsap';\nimport { ScrollTrigger } from 'gsap/ScrollTrigger';\nexport default {\n  name: 'VideoBanner',\n  mounted() {\n    const video = this.$refs.myVideo;\n    if (!video) {\n      console.warn('找不到影片元素');\n      return;\n    }\n    // 確保屬性在播放前已設定（iOS/Safari 需求）\n    try {\n      video.muted = true;\n      video.playsInline = true;\n      video.autoplay = true;\n      video.setAttribute('muted', '');\n      video.setAttribute('playsinline', '');\n      video.setAttribute('webkit-playsinline', '');\n      video.setAttribute('x5-playsinline', '');\n      video.setAttribute('autoplay', '');\n      // 確保不顯示控制列，避免干擾自動播放\n      video.removeAttribute('controls');\n      video.controls = false;\n    } catch (err) {\n      console.warn('設定影片屬性時發生錯誤', err);\n    }\n    const tryPlay = () => {\n      // 先重新載入以確保屬性生效\n      try {\n        video.load();\n      } catch (err) {\n        console.warn('重新載入影片失敗', err);\n      }\n      const p = video.play();\n      if (p && typeof p.then === 'function') {\n        p.catch(err => {\n          console.log('自動播放被阻止:', err);\n        });\n      }\n    };\n    if (video.readyState >= 2) {\n      tryPlay();\n    } else {\n      video.addEventListener('canplay', tryPlay, {\n        once: true\n      });\n      // 某些瀏覽器不觸發 canplay，短暫延遲再嘗試\n      setTimeout(tryPlay, 500);\n    }\n\n    // 手機裝置：若首次被阻擋，於使用者首次互動時再嘗試一次\n    const resumeOnGesture = () => {\n      if (video && video.paused) {\n        tryPlay();\n      }\n      window.removeEventListener('touchstart', resumeOnGesture, true);\n      window.removeEventListener('pointerdown', resumeOnGesture, true);\n      window.removeEventListener('scroll', resumeOnGesture, true);\n      window.removeEventListener('visibilitychange', onVis, true);\n    };\n    const onVis = () => {\n      if (!document.hidden) resumeOnGesture();\n    };\n    window.addEventListener('touchstart', resumeOnGesture, true);\n    window.addEventListener('pointerdown', resumeOnGesture, true);\n    window.addEventListener('scroll', resumeOnGesture, true);\n    window.addEventListener('visibilitychange', onVis, true);\n\n    // 記錄解除監聽的函式，於卸載時清理\n    this._cleanupVideoBanner = () => {\n      try {\n        window.removeEventListener('touchstart', resumeOnGesture, true);\n        window.removeEventListener('pointerdown', resumeOnGesture, true);\n        window.removeEventListener('scroll', resumeOnGesture, true);\n        window.removeEventListener('visibilitychange', onVis, true);\n        video.removeEventListener('canplay', tryPlay, {\n          once: true\n        });\n      } catch (err) {\n        console.warn('清理事件監聽失敗', err);\n      }\n    };\n    gsap.registerPlugin(ScrollTrigger);\n    gsap.to(\".banner h2\", {\n      x: 0,\n      // rotation: 360,\n      opacity: 1,\n      ease: \"power1.out\",\n      scrollTrigger: {\n        trigger: \".banner h2\",\n        //觸發的物件(可省略)\n        start: \"0% 20%\",\n        // (物件開始位置, 卷軸開始位置) 參數可以設定 top center bottom px %\n        end: \"+=0 80%\",\n        //(物件結束位置, 卷軸結束位置) , 也可以設卷軸捲動多少結束動畫(+=300是指start的位置再加上300)\n        // pin: true, // 物件執行完動畫會跟著卷軸走，類似 position: fixed\n        scrub: 3,\n        // 物件動畫延遲的秒數\n        toggleClass: \"active\" // 增加移除的class，class名稱須為字串\n        // markers: true // 顯示標記\n      }\n    });\n  },\n  beforeUnmount() {\n    if (this._cleanupVideoBanner) {\n      this._cleanupVideoBanner();\n      this._cleanupVideoBanner = null;\n    }\n  }\n};","map":{"version":3,"names":["gsap","ScrollTrigger","name","mounted","video","$refs","myVideo","console","warn","muted","playsInline","autoplay","setAttribute","removeAttribute","controls","err","tryPlay","load","p","play","then","catch","log","readyState","addEventListener","once","setTimeout","resumeOnGesture","paused","window","removeEventListener","onVis","document","hidden","_cleanupVideoBanner","registerPlugin","to","x","opacity","ease","scrollTrigger","trigger","start","end","scrub","toggleClass","beforeUnmount"],"sources":["/Users/linhankuan/Documents/GitHub/fvl2025_project/src/components/VideoBanner.vue"],"sourcesContent":["<template>\n  <div class=\"wrap\" style=\"margin:0;padding:0;font-family: 'Poppins', sans-serif;\">\n    <div class=\"banner\">\n      <!-- <video autoplay muted loop style=\"width: 100%\"> \n        <source src=\"../assets/dome.mp4\" type=\"video/mp4\">\n        \n      </video> -->\n      <video\n      ref=\"myVideo\"\n      autoplay\n      muted\n      playsinline\n      webkit-playsinline\n      x5-playsinline\n      loop\n      preload=\"auto\"\n      width=\"100%\"\n      height=\"auto\"\n    >\n      <source src=\"@/assets/dome.mp4\" type=\"video/mp4\" />\n      Your browser does not support HTML5 video.\n    </video>\n      <h2>FUTURE VISION LAB</h2>\n      \n    </div>\n  </div>\n</template>\n\n<script>\nimport { gsap } from 'gsap';\nimport { ScrollTrigger } from 'gsap/ScrollTrigger';\nexport default {\n  name: 'VideoBanner',\n  mounted(){\n    const video = this.$refs.myVideo;\n    if (!video) {\n      console.warn('找不到影片元素');\n      return;\n    }\n    // 確保屬性在播放前已設定（iOS/Safari 需求）\n    try {\n      video.muted = true;\n      video.playsInline = true;\n      video.autoplay = true;\n      video.setAttribute('muted', '');\n      video.setAttribute('playsinline', '');\n      video.setAttribute('webkit-playsinline', '');\n      video.setAttribute('x5-playsinline', '');\n      video.setAttribute('autoplay', '');\n      // 確保不顯示控制列，避免干擾自動播放\n      video.removeAttribute('controls');\n      video.controls = false;\n    } catch (err) {\n      console.warn('設定影片屬性時發生錯誤', err);\n    }\n\n    const tryPlay = () => {\n      // 先重新載入以確保屬性生效\n      try { video.load(); } catch (err) { console.warn('重新載入影片失敗', err); }\n      const p = video.play();\n      if (p && typeof p.then === 'function') {\n        p.catch((err) => {\n          console.log('自動播放被阻止:', err);\n        });\n      }\n    };\n\n    if (video.readyState >= 2) {\n      tryPlay();\n    } else {\n      video.addEventListener('canplay', tryPlay, { once: true });\n      // 某些瀏覽器不觸發 canplay，短暫延遲再嘗試\n      setTimeout(tryPlay, 500);\n    }\n\n    // 手機裝置：若首次被阻擋，於使用者首次互動時再嘗試一次\n    const resumeOnGesture = () => {\n      if (video && video.paused) {\n        tryPlay();\n      }\n      window.removeEventListener('touchstart', resumeOnGesture, true);\n      window.removeEventListener('pointerdown', resumeOnGesture, true);\n      window.removeEventListener('scroll', resumeOnGesture, true);\n      window.removeEventListener('visibilitychange', onVis, true);\n    };\n    const onVis = () => {\n      if (!document.hidden) resumeOnGesture();\n    };\n    window.addEventListener('touchstart', resumeOnGesture, true);\n    window.addEventListener('pointerdown', resumeOnGesture, true);\n    window.addEventListener('scroll', resumeOnGesture, true);\n    window.addEventListener('visibilitychange', onVis, true);\n\n    // 記錄解除監聽的函式，於卸載時清理\n    this._cleanupVideoBanner = () => {\n      try {\n        window.removeEventListener('touchstart', resumeOnGesture, true);\n        window.removeEventListener('pointerdown', resumeOnGesture, true);\n        window.removeEventListener('scroll', resumeOnGesture, true);\n        window.removeEventListener('visibilitychange', onVis, true);\n        video.removeEventListener('canplay', tryPlay, { once: true });\n      } catch (err) { console.warn('清理事件監聽失敗', err); }\n    };\n    gsap.registerPlugin(ScrollTrigger);\n     gsap.to(\".banner h2\",{\n      x:0,\n    // rotation: 360,\n    opacity:1,\n    ease: \"power1.out\",\n    scrollTrigger : {\n      trigger: \".banner h2\", //觸發的物件(可省略)\n      start: \"0% 20%\", // (物件開始位置, 卷軸開始位置) 參數可以設定 top center bottom px %\n      end: \"+=0 80%\", //(物件結束位置, 卷軸結束位置) , 也可以設卷軸捲動多少結束動畫(+=300是指start的位置再加上300)\n      // pin: true, // 物件執行完動畫會跟著卷軸走，類似 position: fixed\n      scrub: 3, // 物件動畫延遲的秒數\n      toggleClass: \"active\", // 增加移除的class，class名稱須為字串\n      // markers: true // 顯示標記\n     }\n  })\n  },\n  beforeUnmount() {\n    if (this._cleanupVideoBanner) {\n      this._cleanupVideoBanner();\n      this._cleanupVideoBanner = null;\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.banner {\n  width: 100%;\n  height:120vh;\n  position: relative;\n  overflow: hidden;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.banner video {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  object-fit: cover;\n}\n\n\n.banner h2 {\n  @keyframes fadeIn {\n  0% { \n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n  animation: fadeIn 2s;\t  \n  font-family: \"Monda\", sans-serif;\n  position: absolute;\n  z-index: 0;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  font-size:22em;\n  font-weight:900;\n  text-align:left;\n  line-height: 1.1cap;\n  text-transform: uppercase;\n  mix-blend-mode: screen;\n  color: #000;\n  background-color: #fff;\n  margin: 0;\n  // padding-left:0.2em;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  -webkit-text-stroke: 15px #000;\n  line-height:0.8em;\n}\n\n@media (max-width:768px){\n  .banner{\n    height: 50vh;\n  }\n  .banner h2{\n    font-size: 5em;\n    line-height: 1.1;\n    -webkit-text-stroke: 5px #000;\n  }\n}\n\n@media (max-width:480px){\n  .banner h2{\n    font-size: 6em;\n    padding: 0;\n  }\n}\n@media (min-width: 2560px){\n  .banner{\n    max-height: 20vh;\n  }\n}\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}